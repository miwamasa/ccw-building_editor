<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç©ºèª¿ã‚·ã‚¹ãƒ†ãƒ  - å»ºç‰©ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ‡ã‚£ã‚¿</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .toolbar {
            background: white;
            padding: 15px 30px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
        }
        
        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .btn-success {
            background: #48bb78;
            color: white;
        }
        
        .btn-success:hover {
            background: #38a169;
        }
        
        .btn-danger {
            background: #f56565;
            color: white;
        }
        
        .btn-danger:hover {
            background: #e53e3e;
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .tree-panel {
            width: 350px;
            background: white;
            border-right: 1px solid #e0e0e0;
            overflow-y: auto;
            padding: 20px;
        }
        
        .tree-item {
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tree-item:hover {
            background: #f0f0f0;
        }
        
        .tree-item.selected {
            background: #e6f2ff;
            color: #667eea;
            font-weight: 600;
        }
        
        .tree-item-icon {
            font-size: 18px;
            width: 20px;
            text-align: center;
        }
        
        .tree-children {
            margin-left: 20px;
        }
        
        .edit-panel {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: #fafafa;
        }
        
        .form-section {
            background: white;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .form-section h2 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #555;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d0d0d0;
            border-radius: 6px;
            font-size: 14px;
            transition: border 0.2s;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .sensor-list {
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 12px;
            background: #f9f9f9;
        }
        
        .sensor-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: white;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .sensor-item:last-child {
            margin-bottom: 0;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .badge-floor { background: #e6f7ff; color: #1890ff; }
        .badge-large-zone { background: #fff7e6; color: #fa8c16; }
        .badge-small-zone { background: #f6ffed; color: #52c41a; }
        .badge-room { background: #fff0f6; color: #eb2f96; }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .stat-card h3 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-card p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .input-file {
            display: none;
        }
        
        .collapse-toggle {
            cursor: pointer;
            user-select: none;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .tree-panel {
                width: 100%;
                max-height: 300px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // åˆæœŸãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        const createEmptyBuilding = () => ({
            id: 'building_1',
            name: 'æ–°è¦ãƒ“ãƒ«',
            description: '',
            floors: []
        });

        const createEmptyFloor = (floorNumber) => ({
            id: `floor_${floorNumber}`,
            name: `${floorNumber}éš`,
            description: '',
            largeZones: []
        });

        const createEmptyLargeZone = (name) => ({
            id: `large_zone_${Date.now()}`,
            name: name,
            description: '',
            smallZones: [],
            ahus: [],
            vavs: []
        });

        const createEmptySmallZone = (name) => ({
            id: `small_zone_${Date.now()}`,
            name: name,
            description: '',
            rooms: [],
            vrfs: []
        });

        const createEmptyRoom = (name) => ({
            id: `room_${Date.now()}`,
            name: name,
            description: '',
            sensors: []
        });

        const createEmptyChiller = () => ({
            id: `chiller_${Date.now()}`,
            name: 'ãƒãƒ©ãƒ¼',
            description: '',
            supplyWaterTemp: 7.0,
            returnWaterTemp: 12.0,
            power: 45.0
        });

        const createEmptyAHU = () => ({
            id: `ahu_${Date.now()}`,
            name: 'å¤–èª¿æ©Ÿ',
            description: '',
            supplyAirTemp: 16.0,
            returnAirTemp: 24.0,
            returnAirHumidity: 50.0,
            outsideAirTemp: 25.0,
            airFlow: 8000.0
        });

        const createEmptyVAV = () => ({
            id: `vav_${Date.now()}`,
            name: 'VAV',
            description: '',
            damperPosition: 70.0,
            dischargeAirFlow: 3000.0
        });

        const createEmptyVRF = () => ({
            id: `vrf_${Date.now()}`,
            name: 'VRFå®¤å¤–æ©Ÿ',
            description: '',
            outdoorTemp: 28.0,
            power: 10.0
        });

        const createEmptySensor = (type) => ({
            id: `sensor_${Date.now()}`,
            type: type,
            name: `${type}ã‚»ãƒ³ã‚µãƒ¼`,
            value: 0,
            unit: type.includes('æ¸©åº¦') ? 'Â°C' : type.includes('æ¹¿åº¦') ? '%' : type.includes('é›»åŠ›') ? 'kW' : ''
        });

        function App() {
            const [building, setBuilding] = useState(createEmptyBuilding());
            const [chillers, setChillers] = useState([]);
            const [selectedItem, setSelectedItem] = useState({ type: 'building', data: null });
            const [expandedItems, setExpandedItems] = useState({});

            // çµ±è¨ˆæƒ…å ±ã®è¨ˆç®—
            const stats = {
                floors: building.floors.length,
                largeZones: building.floors.reduce((sum, f) => sum + f.largeZones.length, 0),
                smallZones: building.floors.reduce((sum, f) => 
                    sum + f.largeZones.reduce((s, lz) => s + lz.smallZones.length, 0), 0),
                rooms: building.floors.reduce((sum, f) => 
                    sum + f.largeZones.reduce((s, lz) => 
                        s + lz.smallZones.reduce((s2, sz) => s2 + sz.rooms.length, 0), 0), 0),
                chillers: chillers.length,
                ahus: building.floors.reduce((sum, f) => 
                    sum + f.largeZones.reduce((s, lz) => s + lz.ahus.length, 0), 0),
                vavs: building.floors.reduce((sum, f) => 
                    sum + f.largeZones.reduce((s, lz) => s + lz.vavs.length, 0), 0),
                vrfs: building.floors.reduce((sum, f) => 
                    sum + f.largeZones.reduce((s, lz) => 
                        s + lz.smallZones.reduce((s2, sz) => s2 + sz.vrfs.length, 0), 0), 0)
            };

            // JSONä¿å­˜
            const handleSaveJSON = () => {
                const data = { building, chillers };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${building.name.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
            };

            // JSONèª­ã¿è¾¼ã¿
            const handleLoadJSON = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.building) setBuilding(data.building);
                            if (data.chillers) setChillers(data.chillers);
                            alert('ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
                        } catch (error) {
                            alert('JSONãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
                        }
                    };
                    reader.readAsText(file);
                }
                event.target.value = '';
            };

            // å»ºç‰©æƒ…å ±ã®æ›´æ–°
            const updateBuilding = (updates) => {
                setBuilding({ ...building, ...updates });
            };

            // ãƒ•ãƒ­ã‚¢è¿½åŠ 
            const addFloor = () => {
                const newFloor = createEmptyFloor(building.floors.length + 1);
                setBuilding({ ...building, floors: [...building.floors, newFloor] });
            };

            // å¤§ã‚¾ãƒ¼ãƒ³è¿½åŠ 
            const addLargeZone = (floorId) => {
                const updatedFloors = building.floors.map(floor => {
                    if (floor.id === floorId) {
                        const newZone = createEmptyLargeZone(`å¤§ã‚¾ãƒ¼ãƒ³${floor.largeZones.length + 1}`);
                        return { ...floor, largeZones: [...floor.largeZones, newZone] };
                    }
                    return floor;
                });
                setBuilding({ ...building, floors: updatedFloors });
            };

            // å°ã‚¾ãƒ¼ãƒ³è¿½åŠ 
            const addSmallZone = (floorId, largeZoneId) => {
                const updatedFloors = building.floors.map(floor => {
                    if (floor.id === floorId) {
                        const updatedLargeZones = floor.largeZones.map(lz => {
                            if (lz.id === largeZoneId) {
                                const newZone = createEmptySmallZone(`å°ã‚¾ãƒ¼ãƒ³${lz.smallZones.length + 1}`);
                                return { ...lz, smallZones: [...lz.smallZones, newZone] };
                            }
                            return lz;
                        });
                        return { ...floor, largeZones: updatedLargeZones };
                    }
                    return floor;
                });
                setBuilding({ ...building, floors: updatedFloors });
            };

            // éƒ¨å±‹è¿½åŠ 
            const addRoom = (floorId, largeZoneId, smallZoneId) => {
                const updatedFloors = building.floors.map(floor => {
                    if (floor.id === floorId) {
                        const updatedLargeZones = floor.largeZones.map(lz => {
                            if (lz.id === largeZoneId) {
                                const updatedSmallZones = lz.smallZones.map(sz => {
                                    if (sz.id === smallZoneId) {
                                        const newRoom = createEmptyRoom(`éƒ¨å±‹${sz.rooms.length + 1}`);
                                        return { ...sz, rooms: [...sz.rooms, newRoom] };
                                    }
                                    return sz;
                                });
                                return { ...lz, smallZones: updatedSmallZones };
                            }
                            return lz;
                        });
                        return { ...floor, largeZones: updatedLargeZones };
                    }
                    return floor;
                });
                setBuilding({ ...building, floors: updatedFloors });
            };

            // ãƒãƒ©ãƒ¼è¿½åŠ 
            const addChiller = () => {
                setChillers([...chillers, createEmptyChiller()]);
            };

            // é …ç›®å‰Šé™¤ï¼ˆæ±ç”¨ï¼‰
            const deleteItem = () => {
                if (!selectedItem.data || selectedItem.type === 'building') return;
                if (!window.confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;

                // å®Ÿè£…ã‚’ç°¡ç•¥åŒ–ã™ã‚‹ãŸã‚ã€çŠ¶æ…‹ã‚’å†æ§‹ç¯‰
                alert('å‰Šé™¤æ©Ÿèƒ½ã¯å®Ÿè£…ä¸­ã§ã™');
            };

            // ãƒ„ãƒªãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã®å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
            const toggleExpand = (id) => {
                setExpandedItems({ ...expandedItems, [id]: !expandedItems[id] });
            };

            // ãƒ„ãƒªãƒ¼ãƒ“ãƒ¥ãƒ¼ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
            const TreeView = () => (
                <div className="tree-panel">
                    <div 
                        className={`tree-item ${selectedItem.type === 'building' ? 'selected' : ''}`}
                        onClick={() => setSelectedItem({ type: 'building', data: building })}
                    >
                        <span className="tree-item-icon">ğŸ¢</span>
                        <span>{building.name}</span>
                    </div>

                    <div className="tree-children">
                        {/* ãƒãƒ©ãƒ¼ */}
                        <div style={{ marginTop: '12px', marginBottom: '8px', fontWeight: 600, fontSize: '13px', color: '#666' }}>
                            å…¨é¤¨ç©ºèª¿æ©Ÿå™¨
                        </div>
                        {chillers.map(chiller => (
                            <div 
                                key={chiller.id}
                                className={`tree-item ${selectedItem.data?.id === chiller.id ? 'selected' : ''}`}
                                onClick={() => setSelectedItem({ type: 'chiller', data: chiller })}
                            >
                                <span className="tree-item-icon">â„ï¸</span>
                                <span>{chiller.name}</span>
                            </div>
                        ))}

                        {/* ãƒ•ãƒ­ã‚¢ */}
                        <div style={{ marginTop: '12px', marginBottom: '8px', fontWeight: 600, fontSize: '13px', color: '#666' }}>
                            å»ºç‰©æ§‹é€ 
                        </div>
                        {building.floors.map(floor => (
                            <div key={floor.id}>
                                <div 
                                    className={`tree-item ${selectedItem.data?.id === floor.id ? 'selected' : ''}`}
                                    onClick={() => setSelectedItem({ type: 'floor', data: floor })}
                                >
                                    <span className="collapse-toggle" onClick={(e) => { e.stopPropagation(); toggleExpand(floor.id); }}>
                                        {expandedItems[floor.id] ? 'â–¼' : 'â–¶'}
                                    </span>
                                    <span className="tree-item-icon">ğŸ›ï¸</span>
                                    <span>{floor.name}</span>
                                    <span className="badge badge-floor">{floor.largeZones.length}</span>
                                </div>
                                
                                {expandedItems[floor.id] && (
                                    <div className="tree-children">
                                        {floor.largeZones.map(largeZone => (
                                            <div key={largeZone.id}>
                                                <div 
                                                    className={`tree-item ${selectedItem.data?.id === largeZone.id ? 'selected' : ''}`}
                                                    onClick={() => setSelectedItem({ type: 'largeZone', data: largeZone, floorId: floor.id })}
                                                >
                                                    <span className="collapse-toggle" onClick={(e) => { e.stopPropagation(); toggleExpand(largeZone.id); }}>
                                                        {expandedItems[largeZone.id] ? 'â–¼' : 'â–¶'}
                                                    </span>
                                                    <span className="tree-item-icon">ğŸŸ¦</span>
                                                    <span>{largeZone.name}</span>
                                                    <span className="badge badge-large-zone">{largeZone.smallZones.length}</span>
                                                </div>
                                                
                                                {expandedItems[largeZone.id] && (
                                                    <div className="tree-children">
                                                        {largeZone.smallZones.map(smallZone => (
                                                            <div key={smallZone.id}>
                                                                <div 
                                                                    className={`tree-item ${selectedItem.data?.id === smallZone.id ? 'selected' : ''}`}
                                                                    onClick={() => setSelectedItem({ type: 'smallZone', data: smallZone, floorId: floor.id, largeZoneId: largeZone.id })}
                                                                >
                                                                    <span className="collapse-toggle" onClick={(e) => { e.stopPropagation(); toggleExpand(smallZone.id); }}>
                                                                        {expandedItems[smallZone.id] ? 'â–¼' : 'â–¶'}
                                                                    </span>
                                                                    <span className="tree-item-icon">ğŸŸ©</span>
                                                                    <span>{smallZone.name}</span>
                                                                    <span className="badge badge-small-zone">{smallZone.rooms.length}</span>
                                                                </div>
                                                                
                                                                {expandedItems[smallZone.id] && (
                                                                    <div className="tree-children">
                                                                        {smallZone.rooms.map(room => (
                                                                            <div 
                                                                                key={room.id}
                                                                                className={`tree-item ${selectedItem.data?.id === room.id ? 'selected' : ''}`}
                                                                                onClick={() => setSelectedItem({ type: 'room', data: room, floorId: floor.id, largeZoneId: largeZone.id, smallZoneId: smallZone.id })}
                                                                            >
                                                                                <span className="tree-item-icon">ğŸšª</span>
                                                                                <span>{room.name}</span>
                                                                            </div>
                                                                        ))}
                                                                    </div>
                                                                )}
                                                            </div>
                                                        ))}
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );

            // ç·¨é›†ãƒ‘ãƒãƒ«ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
            const EditPanel = () => {
                if (!selectedItem.data && selectedItem.type !== 'building') {
                    return (
                        <div className="edit-panel">
                            <div className="empty-state">
                                <div className="empty-state-icon">ğŸ“‹</div>
                                <h3>é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„</h3>
                                <p>å·¦ã®ãƒ„ãƒªãƒ¼ã‹ã‚‰ç·¨é›†ã—ãŸã„é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                            </div>
                        </div>
                    );
                }

                switch (selectedItem.type) {
                    case 'building':
                        return <BuildingEditForm building={building} updateBuilding={updateBuilding} stats={stats} />;
                    case 'floor':
                        return <FloorEditForm floor={selectedItem.data} addLargeZone={addLargeZone} building={building} setBuilding={setBuilding} />;
                    case 'largeZone':
                        return <LargeZoneEditForm largeZone={selectedItem.data} floorId={selectedItem.floorId} addSmallZone={addSmallZone} building={building} setBuilding={setBuilding} />;
                    case 'smallZone':
                        return <SmallZoneEditForm smallZone={selectedItem.data} floorId={selectedItem.floorId} largeZoneId={selectedItem.largeZoneId} addRoom={addRoom} building={building} setBuilding={setBuilding} />;
                    case 'room':
                        return <RoomEditForm room={selectedItem.data} floorId={selectedItem.floorId} largeZoneId={selectedItem.largeZoneId} smallZoneId={selectedItem.smallZoneId} building={building} setBuilding={setBuilding} />;
                    case 'chiller':
                        return <ChillerEditForm chiller={selectedItem.data} chillers={chillers} setChillers={setChillers} />;
                    default:
                        return null;
                }
            };

            return (
                <div className="app-container">
                    <div className="header">
                        <h1>ğŸ¢ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç©ºèª¿ã‚·ã‚¹ãƒ†ãƒ  - å»ºç‰©ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ‡ã‚£ã‚¿</h1>
                        <p>å»ºç‰©ã®éšå±¤æ§‹é€ ã€ç©ºèª¿æ©Ÿå™¨ã€ã‚»ãƒ³ã‚µãƒ¼æƒ…å ±ã‚’å…¥åŠ›ãƒ»ç·¨é›†ã§ãã¾ã™</p>
                    </div>

                    <div className="toolbar">
                        <button className="btn btn-success" onClick={handleSaveJSON}>
                            ğŸ’¾ JSONä¿å­˜
                        </button>
                        <label className="btn btn-secondary">
                            ğŸ“‚ JSONèª­è¾¼
                            <input type="file" className="input-file" accept=".json" onChange={handleLoadJSON} />
                        </label>
                        <button className="btn btn-secondary" onClick={() => loadSampleData(setBuilding, setChillers)}>
                            ğŸ“– ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
                        </button>
                        <button className="btn btn-primary" onClick={addFloor}>
                            â• ãƒ•ãƒ­ã‚¢è¿½åŠ 
                        </button>
                        <button className="btn btn-primary" onClick={addChiller}>
                            â„ï¸ ãƒãƒ©ãƒ¼è¿½åŠ 
                        </button>
                    </div>

                    <div className="main-content">
                        <TreeView />
                        <EditPanel />
                    </div>
                </div>
            );
        }

        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ãƒ¼ãƒ‰
        const loadSampleData = (setBuilding, setChillers) => {
            const sampleBuilding = {
                id: 'building_1',
                name: 'æ±äº¬ã‚°ãƒªãƒ¼ãƒ³ã‚¿ãƒ¯ãƒ¼ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰',
                description: '2éšå»ºã¦ã‚ªãƒ•ã‚£ã‚¹ãƒ“ãƒ«ã€ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç©ºèª¿ã‚·ã‚¹ãƒ†ãƒ ',
                floors: [
                    {
                        id: 'floor_1',
                        name: '1éš',
                        description: 'å»¶åºŠé¢ç©1,200ã¡',
                        largeZones: [
                            {
                                id: 'large_zone_1a',
                                name: 'å¤§ã‚¾ãƒ¼ãƒ³1Aï¼ˆæ±å´ã‚¨ãƒªã‚¢ï¼‰',
                                description: 'å…¨é¤¨ç©ºèª¿æ‹…å½“',
                                smallZones: [
                                    {
                                        id: 'small_zone_1a1',
                                        name: 'å°ã‚¾ãƒ¼ãƒ³1A1ï¼ˆä¼šè­°å®¤ã‚¨ãƒªã‚¢ï¼‰',
                                        description: 'VRFæ‹…å½“',
                                        rooms: [
                                            { id: 'room_101', name: 'ä¼šè­°å®¤101', description: '20ååå®¹', sensors: [] },
                                            { id: 'room_102', name: 'ä¼šè­°å®¤102', description: '10ååå®¹', sensors: [] }
                                        ],
                                        vrfs: []
                                    },
                                    {
                                        id: 'small_zone_1a2',
                                        name: 'å°ã‚¾ãƒ¼ãƒ³1A2ï¼ˆã‚ªãƒ•ã‚£ã‚¹ã‚¨ãƒªã‚¢ï¼‰',
                                        description: 'VRFæ‹…å½“',
                                        rooms: [
                                            { id: 'room_103', name: 'ã‚ªãƒ•ã‚£ã‚¹103', description: 'åŸ·å‹™ã‚¹ãƒšãƒ¼ã‚¹', sensors: [] },
                                            { id: 'room_104', name: 'ã‚ªãƒ•ã‚£ã‚¹104', description: 'åŸ·å‹™ã‚¹ãƒšãƒ¼ã‚¹', sensors: [] }
                                        ],
                                        vrfs: []
                                    }
                                ],
                                ahus: [],
                                vavs: []
                            },
                            {
                                id: 'large_zone_1b',
                                name: 'å¤§ã‚¾ãƒ¼ãƒ³1Bï¼ˆè¥¿å´ã‚¨ãƒªã‚¢ï¼‰',
                                description: 'å…¨é¤¨ç©ºèª¿æ‹…å½“',
                                smallZones: [
                                    {
                                        id: 'small_zone_1b1',
                                        name: 'å°ã‚¾ãƒ¼ãƒ³1B1ï¼ˆåŸ·å‹™å®¤ï¼‰',
                                        description: 'VRFæ‹…å½“',
                                        rooms: [
                                            { id: 'room_106', name: 'åŸ·å‹™å®¤106', description: '30ååå®¹', sensors: [] }
                                        ],
                                        vrfs: []
                                    }
                                ],
                                ahus: [],
                                vavs: []
                            }
                        ]
                    },
                    {
                        id: 'floor_2',
                        name: '2éš',
                        description: 'å»¶åºŠé¢ç©1,200ã¡',
                        largeZones: [
                            {
                                id: 'large_zone_2a',
                                name: 'å¤§ã‚¾ãƒ¼ãƒ³2Aï¼ˆå…¨ãƒ•ãƒ­ã‚¢ï¼‰',
                                description: 'å…¨é¤¨ç©ºèª¿æ‹…å½“',
                                smallZones: [
                                    {
                                        id: 'small_zone_2a1',
                                        name: 'å°ã‚¾ãƒ¼ãƒ³2A1ï¼ˆå½¹å“¡å®¤ã‚¨ãƒªã‚¢ï¼‰',
                                        description: 'VRFæ‹…å½“',
                                        rooms: [
                                            { id: 'room_201', name: 'å½¹å“¡å®¤201', description: 'å½¹å“¡å€‹å®¤', sensors: [] }
                                        ],
                                        vrfs: []
                                    },
                                    {
                                        id: 'small_zone_2a2',
                                        name: 'å°ã‚¾ãƒ¼ãƒ³2A2ï¼ˆã‚ªãƒ¼ãƒ—ãƒ³ã‚ªãƒ•ã‚£ã‚¹ï¼‰',
                                        description: 'VRFæ‹…å½“',
                                        rooms: [
                                            { id: 'room_202', name: 'ã‚ªãƒ¼ãƒ—ãƒ³ã‚ªãƒ•ã‚£ã‚¹202', description: '50ååå®¹', sensors: [] }
                                        ],
                                        vrfs: []
                                    }
                                ],
                                ahus: [],
                                vavs: []
                            }
                        ]
                    }
                ]
            };

            const sampleChillers = [
                {
                    id: 'chiller_1',
                    name: 'ãƒãƒ©ãƒ¼1å·æ©Ÿ',
                    description: 'å…¨é¤¨ç©ºèª¿ç”¨å†·æ°´ç”Ÿæˆ',
                    supplyWaterTemp: 7.0,
                    returnWaterTemp: 12.5,
                    power: 45.2
                }
            ];

            setBuilding(sampleBuilding);
            setChillers(sampleChillers);
            alert('ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
        };

        // å»ºç‰©ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
        function BuildingEditForm({ building, updateBuilding, stats }) {
            return (
                <div className="edit-panel">
                    <div className="form-section">
                        <h2>ğŸ¢ å»ºç‰©æƒ…å ±</h2>
                        <div className="form-group">
                            <label>å»ºç‰©å</label>
                            <input 
                                type="text" 
                                value={building.name}
                                onChange={(e) => updateBuilding({ name: e.target.value })}
                            />
                        </div>
                        <div className="form-group">
                            <label>èª¬æ˜</label>
                            <textarea 
                                value={building.description}
                                onChange={(e) => updateBuilding({ description: e.target.value })}
                                placeholder="å»ºç‰©ã®æ¦‚è¦ã‚„ç‰¹å¾´ã‚’å…¥åŠ›"
                            />
                        </div>
                    </div>

                    <div className="form-section">
                        <h2>ğŸ“Š çµ±è¨ˆæƒ…å ±</h2>
                        <div className="stats-grid">
                            <div className="stat-card">
                                <h3>{stats.floors}</h3>
                                <p>ãƒ•ãƒ­ã‚¢æ•°</p>
                            </div>
                            <div className="stat-card">
                                <h3>{stats.largeZones}</h3>
                                <p>å¤§ã‚¾ãƒ¼ãƒ³æ•°</p>
                            </div>
                            <div className="stat-card">
                                <h3>{stats.smallZones}</h3>
                                <p>å°ã‚¾ãƒ¼ãƒ³æ•°</p>
                            </div>
                            <div className="stat-card">
                                <h3>{stats.rooms}</h3>
                                <p>éƒ¨å±‹æ•°</p>
                            </div>
                            <div className="stat-card">
                                <h3>{stats.chillers}</h3>
                                <p>ãƒãƒ©ãƒ¼æ•°</p>
                            </div>
                            <div className="stat-card">
                                <h3>{stats.ahus}</h3>
                                <p>å¤–èª¿æ©Ÿæ•°</p>
                            </div>
                            <div className="stat-card">
                                <h3>{stats.vavs}</h3>
                                <p>VAVæ•°</p>
                            </div>
                            <div className="stat-card">
                                <h3>{stats.vrfs}</h3>
                                <p>VRFæ•°</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ãƒ•ãƒ­ã‚¢ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
        function FloorEditForm({ floor, addLargeZone, building, setBuilding }) {
            const updateFloor = (updates) => {
                const updatedFloors = building.floors.map(f => 
                    f.id === floor.id ? { ...f, ...updates } : f
                );
                setBuilding({ ...building, floors: updatedFloors });
            };

            return (
                <div className="edit-panel">
                    <div className="form-section">
                        <h2>ğŸ›ï¸ ãƒ•ãƒ­ã‚¢æƒ…å ±</h2>
                        <div className="form-group">
                            <label>ãƒ•ãƒ­ã‚¢å</label>
                            <input 
                                type="text" 
                                value={floor.name}
                                onChange={(e) => updateFloor({ name: e.target.value })}
                            />
                        </div>
                        <div className="form-group">
                            <label>èª¬æ˜</label>
                            <textarea 
                                value={floor.description}
                                onChange={(e) => updateFloor({ description: e.target.value })}
                                placeholder="ãƒ•ãƒ­ã‚¢ã®èª¬æ˜ã‚’å…¥åŠ›" 
                            />
                        </div>
                        <button className="btn btn-primary" onClick={() => addLargeZone(floor.id)}>
                            â• å¤§ã‚¾ãƒ¼ãƒ³è¿½åŠ 
                        </button>
                    </div>
                </div>
            );
        }

        // å¤§ã‚¾ãƒ¼ãƒ³ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
        function LargeZoneEditForm({ largeZone, floorId, addSmallZone, building, setBuilding }) {
            const updateLargeZone = (updates) => {
                const updatedFloors = building.floors.map(f => {
                    if (f.id === floorId) {
                        const updatedLargeZones = f.largeZones.map(lz =>
                            lz.id === largeZone.id ? { ...lz, ...updates } : lz
                        );
                        return { ...f, largeZones: updatedLargeZones };
                    }
                    return f;
                });
                setBuilding({ ...building, floors: updatedFloors });
            };

            return (
                <div className="edit-panel">
                    <div className="form-section">
                        <h2>ğŸŸ¦ å¤§ã‚¾ãƒ¼ãƒ³æƒ…å ±</h2>
                        <div className="form-group">
                            <label>ã‚¾ãƒ¼ãƒ³å</label>
                            <input 
                                type="text" 
                                value={largeZone.name}
                                onChange={(e) => updateLargeZone({ name: e.target.value })}
                            />
                        </div>
                        <div className="form-group">
                            <label>èª¬æ˜</label>
                            <textarea 
                                value={largeZone.description}
                                onChange={(e) => updateLargeZone({ description: e.target.value })}
                                placeholder="å¤§ã‚¾ãƒ¼ãƒ³ã®èª¬æ˜ã‚’å…¥åŠ›" 
                            />
                        </div>
                        <button className="btn btn-primary" onClick={() => addSmallZone(floorId, largeZone.id)}>
                            â• å°ã‚¾ãƒ¼ãƒ³è¿½åŠ 
                        </button>
                    </div>
                    <div className="form-section">
                        <h2>ğŸŒ€ å¤–èª¿æ©Ÿ (AHU)</h2>
                        <p style={{ color: '#666', marginBottom: '12px' }}>
                            å…¨é¤¨ç©ºèª¿ã‚·ã‚¹ãƒ†ãƒ ã®å¤–æ°—å‡¦ç†ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆ{largeZone.ahus?.length || 0}å°ï¼‰
                        </p>
                        <button className="btn btn-secondary">â• å¤–èª¿æ©Ÿè¿½åŠ </button>
                    </div>
                    <div className="form-section">
                        <h2>ğŸ’¨ VAV</h2>
                        <p style={{ color: '#666', marginBottom: '12px' }}>
                            å¤‰é¢¨é‡ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆ{largeZone.vavs?.length || 0}å°ï¼‰
                        </p>
                        <button className="btn btn-secondary">â• VAVè¿½åŠ </button>
                    </div>
                </div>
            );
        }

        // å°ã‚¾ãƒ¼ãƒ³ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
        function SmallZoneEditForm({ smallZone, floorId, largeZoneId, addRoom, building, setBuilding }) {
            const updateSmallZone = (updates) => {
                const updatedFloors = building.floors.map(f => {
                    if (f.id === floorId) {
                        const updatedLargeZones = f.largeZones.map(lz => {
                            if (lz.id === largeZoneId) {
                                const updatedSmallZones = lz.smallZones.map(sz =>
                                    sz.id === smallZone.id ? { ...sz, ...updates } : sz
                                );
                                return { ...lz, smallZones: updatedSmallZones };
                            }
                            return lz;
                        });
                        return { ...f, largeZones: updatedLargeZones };
                    }
                    return f;
                });
                setBuilding({ ...building, floors: updatedFloors });
            };

            return (
                <div className="edit-panel">
                    <div className="form-section">
                        <h2>ğŸŸ© å°ã‚¾ãƒ¼ãƒ³æƒ…å ±</h2>
                        <div className="form-group">
                            <label>ã‚¾ãƒ¼ãƒ³å</label>
                            <input 
                                type="text" 
                                value={smallZone.name}
                                onChange={(e) => updateSmallZone({ name: e.target.value })}
                            />
                        </div>
                        <div className="form-group">
                            <label>èª¬æ˜</label>
                            <textarea 
                                value={smallZone.description}
                                onChange={(e) => updateSmallZone({ description: e.target.value })}
                                placeholder="å°ã‚¾ãƒ¼ãƒ³ã®èª¬æ˜ã‚’å…¥åŠ›" 
                            />
                        </div>
                        <button className="btn btn-primary" onClick={() => addRoom(floorId, largeZoneId, smallZone.id)}>
                            â• éƒ¨å±‹è¿½åŠ 
                        </button>
                    </div>
                    <div className="form-section">
                        <h2>ğŸ”§ VRFå®¤å¤–æ©Ÿ</h2>
                        <p style={{ color: '#666', marginBottom: '12px' }}>
                            å€‹åˆ¥ç©ºèª¿ã‚·ã‚¹ãƒ†ãƒ ã®å®¤å¤–æ©Ÿï¼ˆ{smallZone.vrfs?.length || 0}å°ï¼‰
                        </p>
                        <button className="btn btn-secondary">â• VRFè¿½åŠ </button>
                    </div>
                </div>
            );
        }

        // éƒ¨å±‹ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
        function RoomEditForm({ room, floorId, largeZoneId, smallZoneId, building, setBuilding }) {
            const updateRoom = (updates) => {
                const updatedFloors = building.floors.map(f => {
                    if (f.id === floorId) {
                        const updatedLargeZones = f.largeZones.map(lz => {
                            if (lz.id === largeZoneId) {
                                const updatedSmallZones = lz.smallZones.map(sz => {
                                    if (sz.id === smallZoneId) {
                                        const updatedRooms = sz.rooms.map(r =>
                                            r.id === room.id ? { ...r, ...updates } : r
                                        );
                                        return { ...sz, rooms: updatedRooms };
                                    }
                                    return sz;
                                });
                                return { ...lz, smallZones: updatedSmallZones };
                            }
                            return lz;
                        });
                        return { ...f, largeZones: updatedLargeZones };
                    }
                    return f;
                });
                setBuilding({ ...building, floors: updatedFloors });
            };

            return (
                <div className="edit-panel">
                    <div className="form-section">
                        <h2>ğŸšª éƒ¨å±‹æƒ…å ±</h2>
                        <div className="form-group">
                            <label>éƒ¨å±‹å</label>
                            <input 
                                type="text" 
                                value={room.name}
                                onChange={(e) => updateRoom({ name: e.target.value })}
                            />
                        </div>
                        <div className="form-group">
                            <label>èª¬æ˜</label>
                            <textarea 
                                value={room.description}
                                onChange={(e) => updateRoom({ description: e.target.value })}
                                placeholder="éƒ¨å±‹ã®ç”¨é€”ã‚„ç‰¹å¾´ã‚’å…¥åŠ›" 
                            />
                        </div>
                    </div>
                    <div className="form-section">
                        <h2>ğŸŒ¡ï¸ ã‚»ãƒ³ã‚µãƒ¼</h2>
                        <div className="sensor-list">
                            {room.sensors && room.sensors.length > 0 ? (
                                room.sensors.map(sensor => (
                                    <div key={sensor.id} className="sensor-item">
                                        <span>{sensor.name}</span>
                                        <span>{sensor.value} {sensor.unit}</span>
                                    </div>
                                ))
                            ) : (
                                <p style={{ color: '#999', textAlign: 'center' }}>ã‚»ãƒ³ã‚µãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“</p>
                            )}
                        </div>
                        <button className="btn btn-secondary" style={{ marginTop: '12px' }}>
                            â• ã‚»ãƒ³ã‚µãƒ¼è¿½åŠ 
                        </button>
                    </div>
                </div>
            );
        }

        // ãƒãƒ©ãƒ¼ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
        function ChillerEditForm({ chiller, chillers, setChillers }) {
            const updateChiller = (updates) => {
                const updatedChillers = chillers.map(c =>
                    c.id === chiller.id ? { ...c, ...updates } : c
                );
                setChillers(updatedChillers);
            };

            return (
                <div className="edit-panel">
                    <div className="form-section">
                        <h2>â„ï¸ ãƒãƒ©ãƒ¼æƒ…å ±</h2>
                        <div className="form-group">
                            <label>æ©Ÿå™¨å</label>
                            <input 
                                type="text" 
                                value={chiller.name}
                                onChange={(e) => updateChiller({ name: e.target.value })}
                            />
                        </div>
                        <div className="form-group">
                            <label>èª¬æ˜</label>
                            <textarea 
                                value={chiller.description}
                                onChange={(e) => updateChiller({ description: e.target.value })}
                                placeholder="ãƒãƒ©ãƒ¼ã®ä»•æ§˜ã‚„ç‰¹å¾´ã‚’å…¥åŠ›" 
                            />
                        </div>
                    </div>
                    <div className="form-section">
                        <h2>ğŸ“Š é‹è»¢ãƒ‡ãƒ¼ã‚¿</h2>
                        <div className="form-row">
                            <div className="form-group">
                                <label>ä¾›çµ¦æ°´æ¸© (Â°C)</label>
                                <input 
                                    type="number" 
                                    value={chiller.supplyWaterTemp}
                                    onChange={(e) => updateChiller({ supplyWaterTemp: parseFloat(e.target.value) })}
                                    step="0.1" 
                                />
                            </div>
                            <div className="form-group">
                                <label>é‚„æ°´æ¸© (Â°C)</label>
                                <input 
                                    type="number" 
                                    value={chiller.returnWaterTemp}
                                    onChange={(e) => updateChiller({ returnWaterTemp: parseFloat(e.target.value) })}
                                    step="0.1" 
                                />
                            </div>
                        </div>
                        <div className="form-group">
                            <label>æ¶ˆè²»é›»åŠ› (kW)</label>
                            <input 
                                type="number" 
                                value={chiller.power}
                                onChange={(e) => updateChiller({ power: parseFloat(e.target.value) })}
                                step="0.1" 
                            />
                        </div>
                    </div>
                </div>
            );
        }

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>